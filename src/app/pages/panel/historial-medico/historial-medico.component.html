<app-layout></app-layout>

<main id="content">
  <p-toast></p-toast>
  <h1 class="mb-4 text-3xl">Historial Médico</h1>

  <div class="field mt-[1rem]">
    <label for="mascotas">Seleccione la mascota</label>
    <p-dropdown
      inputId="mascotas"
      [options]="mascotas"
      optionLabel="nombre"
      [showClear]="true"
      [(ngModel)]="selectedMascota"
      [filter]="true"
      filterBy="nombre"
      class="block w-full mb-4"
    ></p-dropdown>

    <p-button
      label="Buscar historial médico"
      [rounded]="true"
      severity="secondary"
      class="w-full "
      (click)="findHistorialMedico()"
    ></p-button>
  </div>

  <p-timeline
    [value]="tratamientos"
    align="alternate"
    styleClass="customized-timeline"
  >
    <ng-template pTemplate="marker" let-tratamiento>
      <span
        class="custom-marker w-10 h-10 text-center shadow-2 p-2 rounded-full bg-slate-700 text-white"
      >
        <i class="bi bi-capsule"></i>
      </span>
    </ng-template>
    <ng-template pTemplate="content" let-tratamiento>
      <p-card
        [header]="tratamiento.fecha"
        [subheader]="'Atendido por: ' + tratamiento.nombreVeterinario"
      >
        <div class="flex">
          <img
            *ngIf="tratamiento.urlFotoVeterinario"
            [src]="tratamiento.urlFotoVeterinario"
            [alt]="tratamiento.nombreVeterinario"
            width="200"
            class="shadow-2 rounded-full object-cover"
          />
          <div class="flex-col ml-5">
            <h4>Drogas asignada</h4>
            <p>
              {{
                tratamiento.nombreDroga
                  ? tratamiento.nombreDroga
                  : "No tiene droga asignada"
              }}
            </p>
          </div>
        </div>
      </p-card>
    </ng-template>
  </p-timeline>
</main>
